#!/bin/sh
# will invoke an editor to edit all filenames given as arguments
# integrates with git and falls back to conventional mv

type qcmd || { echo "this mechanism needs package renameutils"; exit 1; }

INSIDEGIT=$(git rev-parse --is-inside-work-tree 2>/dev/null; echo $?)
FILESINGIT=$(git ls-files --error-unmatch "${@}" 2>/dev/null; echo $?)

${INSIDEGIT} && ${FILESINGIT} && COMMAND="/usr/lib/git-core/git-mv" || COMMAND="mv"
command qcmd -A --format=destination-only --command=${COMMAND} "${@}"
